<div fxLayout="column"
     fxLayoutAlign="center"
     fxLayoutGap="10px">
    <div fxFlex>
        <md-card class="card">
            <md-card-header>
                <md-card-title>
                    {{ task?.name }}
                </md-card-title>
                <md-card-subtitle>
                    <p>Status :&nbsp;<md-checkbox [disabled]="!canEdit && !canComplete" (change)="completeTask()" [checked]="task.completed"></md-checkbox></p>
                </md-card-subtitle>
            </md-card-header>
            <md-card-content>
                <md-grid-list #grid cols="4" rowHeight="15em">
                    <md-grid-tile [colspan]="1" [rowspan]="1">
                        <md-card class="nothing">
                            <md-card-title>Task Name</md-card-title>
                            <md-card-content>
                                <md-input-container>
                                    <input mdInput [disabled]="!canEdit" placeholder="Task Name" [(ngModel)]="task.name" >
                                </md-input-container>
                            </md-card-content>
                        </md-card>
                    </md-grid-tile>
                    <md-grid-tile [colspan]="1" [rowspan]="1">
                        <md-card class="nothing">
                            <md-card-title>Assignees</md-card-title>
                            <md-card-subtitle>Here are the members this task is assigned to</md-card-subtitle>
                            <md-card-content>
                                <div class="scroll">
                                    <br>
                                    <p *ngIf="task.assignee_email.length < 1">No assignees</p>
                                    <md-chip-list *ngFor="let assignee of task.assignee_email">
                                        <md-chip mdTooltip="Remove" color="primary" selected="true">{{ assignee }}</md-chip>
                                    </md-chip-list>
                                </div>
                            </md-card-content>
                        </md-card>
                    </md-grid-tile>
                    <md-grid-tile [colspan]="1" [rowspan]="1">
                        <md-card class="nothing">
                            <md-card-title>Early Dates </md-card-title>
                            <md-card-subtitle>Early dates expected for this tasks</md-card-subtitle>
                            <md-card-content>
                                <md-input-container >
                                    <input mdInput [disabled]="!canEdit" [mdDatepicker]="earlyStart" placeholder="{{task.date_start}}" [(ngModel)]="task.date_start">
                                    <button mdSuffix [disabled]="!canEdit" [mdDatepickerToggle]="earlyStart"></button>
                                </md-input-container>
                                <md-datepicker #earlyStart></md-datepicker>
                                <md-input-container >
                                    <input mdInput [disabled]="!canEdit" [mdDatepicker]="earlyEnd" placeholder="{{task.date_end}}" [(ngModel)]="task.date_end">
                                    <button mdSuffix [disabled]="!canEdit" [mdDatepickerToggle]="earlyEnd"></button>
                                </md-input-container>
                                <md-datepicker #earlyEnd></md-datepicker>
                            </md-card-content>
                        </md-card>
                    </md-grid-tile>
                    <md-grid-tile [colspan]="1" [rowspan]="1">
                        <md-card class="nothing">
                            <md-card-title>Late dates</md-card-title>
                            <md-card-subtitle>Late dates expected for this task</md-card-subtitle>
                            <md-card-content>
                                <md-input-container >
                                    <input mdInput [disabled]="!canEdit" [mdDatepicker]="lateStart" placeholder="{{task.date_start}}" [(ngModel)]="task.date_start">
                                    <button mdSuffix [disabled]="!canEdit" [mdDatepickerToggle]="lateStart"></button>
                                </md-input-container>
                                <md-datepicker #lateStart></md-datepicker>
                                <md-input-container >
                                    <input mdInput [disabled]="!canEdit" [mdDatepicker]="lateEnd" placeholder="{{task.date_end}}" [(ngModel)]="task.date_end">
                                    <button mdSuffix [disabled]="!canEdit" [mdDatepickerToggle]="lateEnd"></button>
                                </md-input-container>
                                <md-datepicker #lateEnd></md-datepicker>
                            </md-card-content>
                        </md-card>
                    </md-grid-tile>
                    <md-grid-tile #description [colspan]="3" [rowspan]="1">
                        <md-card class="nothing">
                            <md-card-title>Task Description</md-card-title>
                            <md-card-subtitle></md-card-subtitle>
                            <md-card-content>
                                <md-input-container style="width:100%">
                                    <textarea mdInput [disabled]="!canEdit" [(ngModel)]="task.description" cols="100" rows="5" placeholder="Here can be your description"></textarea>
                                </md-input-container>
                            </md-card-content>
                        </md-card>
                    </md-grid-tile>
                    <md-grid-tile [colspan]="1" [rowspan]="1">
                        <md-card class="nothing">
                            <md-card-title>Task Dependencies</md-card-title>
                            <md-card-subtitle></md-card-subtitle>
                            <md-card-content>
                                <div *ngIf="task.dependencies?.length>0;else no_dependency">
                                    <md-chip-list *ngFor="let dependency of task.dependencies">
                                        <md-chip mdTooltip="Remove" color="primary" selected="true">{{dependency.name}}--{{dependency.type}}</md-chip>
                                    </md-chip-list>
                                </div>
                                <ng-template #no_dependency>No dependencies linked to this task</ng-template>
                            </md-card-content>
                        </md-card>
                    </md-grid-tile >
                </md-grid-list>
            </md-card-content>
            <md-card-footer>
                <md-divider></md-divider>
                <md-icon>history</md-icon> Updated {{lastUpdated}} minutes ago
            </md-card-footer>
        </md-card>
    </div>
    <div fxFlex>
        <md-card class="card">
            <md-card-header>
                <md-card-title>
                    Comments Section
                </md-card-title>
                <md-card-subtitle>
                    Comments for this task
                </md-card-subtitle>
            </md-card-header>
            <md-card-content>
                No comments available at this moment
            </md-card-content>
            <md-card-footer>
                <md-divider></md-divider>
                <md-icon>history</md-icon> Updated 3 minutes ago
            </md-card-footer>
        </md-card>
    </div>
</div>